<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pleeble — Email Confirmed</title>

  <!-- Brand & Social -->
  <meta name="theme-color" content="#164f96" />
  <meta name="description" content="Your Pleeble account is confirmed. You can open the app now." />
  <meta property="og:title" content="Pleeble — Email Confirmed" />
  <meta property="og:description" content="Thanks! Your account is ready. Open the app to get started." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://yourcdn.example.com/pleeble/og.png" />
  <link rel="icon" href="https://yourcdn.example.com/pleeble/favicon.svg" />

  <style>
    :root{
      --bg: #0b2d5a;        /* Deep blue for hero */
      --brand: #164f96;     /* Pleeble primary */
      --brand-2: #1e66c1;   /* Hover */
      --ink: #0a0f1a;       /* Text */
      --muted: #5b6b86;
      --card: #ffffff;
      --success: #2dbf6c;
      --ring: rgba(30,102,193,0.35);
      --shadow: 0 10px 30px rgba(10,15,26,.12), 0 4px 12px rgba(10,15,26,.10);
      --radius: 18px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--ink);
      background:
        radial-gradient(1200px 600px at 80% -100px, #1e66c1 0%, transparent 60%),
        radial-gradient(900px 500px at -20% -120px, #0f3f7b 0%, transparent 55%),
        linear-gradient(180deg, #0b2d5a 0%, #0d366a 30%, #0f3f7b 60%, #103e70 100%);
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .shell {
      width: 100%;
      max-width: 760px;
    }

    .header {
      display: flex; align-items: center; gap: 10px;
      color: #fff;
      padding: 10px 0 24px;
      user-select: none;
    }
    .logo {
      width: 28px; height: 28px; display: grid; place-items: center;
      background: #fff;
      color: var(--brand);
      border-radius: 10px;
      font-weight: 900;
      box-shadow: 0 2px 10px rgba(0,0,0,.15);
    }
    .brand {
      font-size: 18px; font-weight: 700; letter-spacing:.2px;
    }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .hero {
      padding: 42px 38px 22px;
      background:
        radial-gradient(300px 140px at 100% 0%, rgba(255,255,255,.18), transparent 60%),
        linear-gradient(180deg, #12437f, #103a6e);
      color: #fff;
      position: relative;
    }

    .check {
      width: 80px; height: 80px; border-radius: 20px;
      background: rgba(255,255,255,.15);
      display: grid; place-items: center;
      margin-bottom: 18px;
      backdrop-filter: blur(4px);
      position: relative;
      overflow: hidden;
    }
    .check::before {
      content:"";
      position: absolute; inset: 0;
      border-radius: 20px;
      background: conic-gradient(from 90deg, rgba(255,255,255,.25), transparent 40% 60%, rgba(255,255,255,.25));
      animation: spin 2.4s linear infinite;
      mask: radial-gradient(circle at center, transparent 58%, #000 60%);
    }
    .check svg {
      position: relative;
      width: 38px; height: 38px;
      color: #b6ffdb;
      filter: drop-shadow(0 6px 14px rgba(0,0,0,.25));
      transform: scale(.9);
      animation: pop .6s ease-out both .15s;
    }
    @keyframes pop { from { transform: scale(.5); opacity: 0 } to { transform: scale(.9); opacity: 1 } }
    @keyframes spin { to { transform: rotate(1turn) } }

    .title { font-size: clamp(22px, 3.6vw, 28px); font-weight: 800; margin: 0 0 6px; letter-spacing:.2px;}
    .subtitle { margin: 0; opacity:.9 }

    .body {
      padding: 26px 28px 30px;
      display: grid; gap: 18px;
      background: linear-gradient(180deg, #fff, #fbfdff 70%);
    }

    .cta {
      display: grid; gap: 10px;
      grid-template-columns: minmax(0,1fr);
    }

    .btn {
      appearance: none; border: 0; cursor: pointer;
      padding: 14px 16px;
      border-radius: 14px; font-weight: 700; letter-spacing:.2px;
      box-shadow: 0 3px 0 rgba(0,0,0,.05);
      transition: transform .05s ease, background .2s ease, box-shadow .2s ease;
    }
    .btn-primary {
      background: var(--brand); color: #fff;
      box-shadow: 0 10px 22px var(--ring);
    }
    .btn-primary:hover { background: var(--brand-2) }
    .btn:active { transform: translateY(1px) }

    .muted {
      color: var(--muted);
      font-size: 14px;
    }

    .footer {
      text-align: center;
      color: #c8d3e6;
      margin-top: 18px;
      font-size: 12px;
    }

    .kbd {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 12px; padding: 2px 6px; border-radius: 6px;
      background: #f4f7fb; border: 1px solid #dfe7f3; color: #394a6b;
    }

    @media (min-width: 560px){
      .body { grid-template-columns: 1fr; }
      .cta { grid-template-columns: .6fr .4fr; align-items: center; }
    }
  </style>
</head>
<body>
  <main class="shell" role="main" aria-labelledby="title">
    <header class="header" aria-label="Pleeble">
      <div class="logo" aria-hidden="true">✔</div>
      <div class="brand">Pleeble</div>
    </header>

    <section class="card" aria-live="polite">
      <div class="hero">
        <div class="check" aria-hidden="true">
          <!-- check icon -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M20 6L9 17l-5-5"/>
          </svg>
        </div>
        <h1 id="title" class="title">Email confirmed</h1>
        <p class="subtitle">Thanks! Your Pleeble account is ready to use.</p>
      </div>

      <div class="body">
        <div class="cta">
          <button id="open-app" class="btn btn-primary">Open the Pleeble app</button>
          <a id="fallback" class="btn" style="text-align:center; background:#eef4fb; color:#0f3266; font-weight:700; text-decoration:none;"
             href="https://pleeble.dev">Go to pleeble.dev</a>
        </div>

        <p class="muted" id="hint">
          On a phone with Pleeble installed, the button above will open the app automatically.
          If nothing happens, copy this link and open it manually:
          <span class="kbd" id="deeplink-kbd">pleeble://auth-callback</span>
        </p>
      </div>
    </section>

    <p class="footer">
      Need help? Email <a href="mailto:support@pleeble.dev" style="color:#d7e6ff">support@pleeble.dev</a>
    </p>
  </main>

  <script>
    // Configure your app scheme here (must match the app)
    const APP_SCHEME = "pleeble://auth-callback";

    // Optional: Supabase appends query params like ?type=signup&token=...
    // If you want to feed them back to the app, append them:
    const qp = window.location.search; // keep as-is
    const deepLink = APP_SCHEME + qp;

    const btn = document.getElementById('open-app');
    const kbd = document.getElementById('deeplink-kbd');
    kbd.textContent = deepLink;

    // If user is on iOS/Android, attempt the deep link; otherwise just show the href.
    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

    btn.addEventListener('click', () => {
      if (!isMobile) {
        // Desktop Safari/Chrome cannot handle custom schemes unless an app registered them.
        // Still try; then fall back.
        window.location.href = deepLink;
        setTimeout(() => {
          // If nothing happened, suggest the website
          document.getElementById('fallback').focus();
        }, 1000);
        return;
      }

      // Mobile: try opening the app
      const start = Date.now();
      window.location.href = deepLink;

      // After a short delay, if the app didn't open, we stay on this page and the user can tap the fallback.
      setTimeout(() => {
        if (Date.now() - start < 1200) {
          // Probably failed to open; do nothing (buttons already on page)
        }
      }, 900);
    });
  </script>
</body>
</html>
